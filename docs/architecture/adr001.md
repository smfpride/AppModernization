# Architecture Decision Record 001: Azure PaaS Modernization Strategy

**Date:** October 3, 2025  
**Status:** Approved  
**Architects:** Riley  
**Context:** eShopLegacyMVC to Azure PaaS Migration  

## Context

The eShopLegacyMVC application is a .NET Framework 4.7.2 MVC web application that needs to be modernized for Azure PaaS within an 8-hour prototype timeline. The application currently uses:

- **Architecture Pattern:** Traditional 3-tier MVC architecture
- **Framework:** ASP.NET MVC 5 with Web API 2
- **Database:** Entity Framework 6 with SQL Server LocalDB
- **Dependency Injection:** Autofac container
- **Logging:** log4net
- **Monitoring:** Application Insights (already configured)

## Decision

### 1. Containerization Strategy
**Decision:** Use Windows containers with Azure App Service for Containers
**Rationale:** 
- Minimal code changes required for .NET Framework 4.7.2
- Maintains compatibility with existing dependencies
- Fast time-to-market for prototype

### 2. Database Modernization
**Decision:** Migrate to Azure SQL Database
**Rationale:**
- Direct migration path from SQL Server LocalDB
- Built-in scaling, backup, and security features
- Minimal Entity Framework code changes required

### 3. Configuration Management
**Decision:** Implement Azure Key Vault for secrets management
**Rationale:**
- Centralizes connection strings and sensitive configuration
- Meets enterprise security requirements
- Easy integration with Azure App Service

### 4. Authentication & Authorization
**Decision:** Use Managed Identity for Azure service authentication
**Rationale:**
- Eliminates credential management overhead
- Follows Azure security best practices
- Simplified deployment process

### 5. Monitoring & Observability
**Decision:** Enhance existing Application Insights integration
**Rationale:**
- Application already has Application Insights configured
- Add structured logging and custom metrics
- Minimal development effort required

## Consequences

### Positive
- Fast prototype deployment (< 8 hours)
- Maintains application stability
- Leverages existing Application Insights setup
- Follows Azure Well-Architected Framework principles

### Negative  
- Still dependent on .NET Framework (future modernization needed)
- Windows containers are larger than Linux containers
- Some legacy dependencies may need attention

## Implementation Approach
- **Phase 1:** Lift-and-shift with containerization
- **Phase 2:** Database migration to Azure SQL
- **Phase 3:** Configuration externalization to Key Vault
- **Phase 4:** Enhanced monitoring and logging